
EXTRA_CFLAGS += -DHI_DISP_BUILD_FULL  -D__DISP_PLATFORM_SDK__ -D__DISP_D0_FOLLOW_D1__ -D__DISP_SELF_START__


ifeq ($(CONFIG_HI_DISP_USE_QPLL_SOLELY), y)
EXTRA_CFLAGS += -DHI_DISP_DOUBLE_HD_SUPPORT
endif

ifeq ($(CONFIG_HIFB_CURSOR_SUPPORT), y)
EXTRA_CFLAGS += -DHI_GFX_USE_G3
endif

ifeq ($(CONFIG_HI_DISP_TTX_SUPPORT), y)
EXTRA_CFLAGS += -DHI_DISP_TTX_SUPPORT
endif

ifeq ($(CONFIG_HI_DISP_G1_ATTACH_HD_SUPPORT), y)
EXTRA_CFLAGS += -DHI_DISP_ATTACH_OSD_SUPPORT
endif

ifeq ($(CONFIG_HI_DISP_CSC_MODE_RGB), y)
EXTRA_CFLAGS += -DHI_DISP_MODE_TC
endif

ifeq ($(CONFIG_HI_VO_WRAP_SUPPORT), y)
EXTRA_CFLAGS += -DHI_VO_WRAP_SUPPORT
endif

ifeq ($(CONFIG_HI_DISP_CGMS_SUPPORT), y)
EXTRA_CFLAGS += -DHI_DISP_CGMS_SUPPORT
endif

ifeq ($(CONFIG_HI_DISP_LCD_SUPPORT), y)
EXTRA_CFLAGS += -DHI_DISP_LCD_SUPPORT
endif


ifeq ($(CONFIG_HI_VO_MOSAIC_SUPPORT), y)
EXTRA_CFLAGS += -DHI_VO_MOSAIC_SUPPORT
endif


ifeq ($(CONFIG_HI_VO_SINGLE_VIDEO_SUPPORT), y)
EXTRA_CFLAGS += -DHI_VO_SINGLE_VIDEO_SUPPORT
endif


ifeq ($(CONFIG_HI_VO_STILLFRAME_SUPPORT), y)
EXTRA_CFLAGS += -DHI_VO_STILLFRAME_SUPPORT
endif

ifeq ($(CONFIG_HI_VO_DUMPFRAME_SUPPORT), y)
EXTRA_CFLAGS += -DHI_VO_DUMPFRAME_SUPPORT
endif


ifeq ($(CONFIG_HI_VO_MOSAIC_SUPPORT), y)
EXTRA_CFLAGS += -DHI_VO_MOSAIC_SUPPORT
endif

EXTRA_CFLAGS += -DHI_VO_SHARPNESS_SUPPORT

ifeq ($(CONFIG_HI_VDEC_DEINTERLACE_SUPPORT), y)
EXTRA_CFLAGS += -DHI_VO_HD_VIDEO_DO_DEI
endif


obj-$(CONFIG_HI_VDP_SUPPORT) += hi_vdp.o

#KBUILD_EXTRA_SYMBOLS += $(COMMON_DIR)/drv/Module.symvers

HAL_DIR := cv200
DRIVER_PATH := $(src)/vdp_v1_0
EXTRA_CFLAGS += -I$(DRIVER_PATH)/hal/common -I$(DRIVER_PATH)/hal/$(HAL_DIR) -I$(DRIVER_PATH)/alg -I$(DRIVER_PATH)/com -I$(DRIVER_PATH)/drv -I$(DRIVER_PATH)
EXTRA_CFLAGS += -I$(DRIVER_PATH)/include
EXTRA_CFLAGS += -I$(src)/../include -I$(src)/../common/include

HAL_FILES := $(wildcard $(DRIVER_PATH)/hal/common/*.c)
HAL_FILES += $(wildcard $(DRIVER_PATH)/hal/$(HAL_DIR)/*.c)

ALG_FILES := $(wildcard $(DRIVER_PATH)/alg/*.c)

FULL_PATH_DRV_SRCS := $(wildcard $(DRIVER_PATH)/*.c)
FULL_PATH_DRV_SRCS += $(wildcard $(DRIVER_PATH)/com/*.c)
FULL_PATH_DRV_SRCS += $(wildcard $(DRIVER_PATH)/drv/*.c)
FULL_PATH_DRV_SRCS += $(ALG_FILES) \
		      $(HAL_FILES)
FULL_PATH_DRV_SRCS := $(filter-out %.mod.c, $(FULL_PATH_DRV_SRCS))

DRV_SRCS := $(shell echo $(FULL_PATH_DRV_SRCS) \
    	    | awk '{for(i=1;i<=NF;i++)print $$i}' \
	    | sed "s:\(.*\)/\<vo\>\(.*\):.\2:g")

DRV_SRCS_C := $(filter-out %.S, $(DRV_SRCS))

ODRV_OBJS  := $(patsubst %.c,%.o,$(DRV_SRCS_C))

ifdef CFG_HI_ADVCA_FUNCTION
ODRV_OBJS += vdp_v1_0/alg/drv_disp_alg_zme_advca.o
else
ODRV_OBJS += vdp_v1_0/alg/drv_disp_alg_zme.o
endif

hi_vdp-y = $(ODRV_OBJS)

